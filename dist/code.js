"use strict";(()=>{var g=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var d=(e,r,t)=>new Promise((o,a)=>{var i=p=>{try{s(t.next(p))}catch(c){a(c)}},n=p=>{try{s(t.throw(p))}catch(c){a(c)}},s=p=>p.done?o(p.value):Promise.resolve(p.value).then(i,n);s((t=t.apply(e,r)).next())});var y=g(f=>{figma.showUI(__html__,{width:480,height:560,title:"Heavy Props Renamer"});figma.ui.onmessage=e=>d(f,null,function*(){if((e==null?void 0:e.type)==="search-props"){let r=(e.query||"").toLowerCase().trim();if(!r){figma.ui.postMessage({type:"error",message:"Enter a search term."});return}let t=[];yield figma.loadAllPagesAsync();for(let o of figma.root.children){let a=o.findAllWithCriteria({types:["COMPONENT","COMPONENT_SET"]});for(let i of a)try{let n=i.componentPropertyDefinitions;if(!n)continue;for(let s of Object.keys(n)){let p=s.includes("#")?s.split("#")[0]:s;p.toLowerCase().includes(r)&&t.push({nodeId:i.id,pageId:o.id,pageName:o.name,propKey:s,displayName:p,componentName:i.name,propType:n[s].type})}}catch(n){console.warn("Skipping node:",i.id,n)}}figma.ui.postMessage({type:"search-results",results:t,query:r});return}if((e==null?void 0:e.type)==="rename-props"){let r=e.renames||[];if(r.length===0){figma.ui.postMessage({type:"error",message:"No properties selected to rename."});return}let t=0,o=0,a=[];yield figma.loadAllPagesAsync();for(let i of r)try{let n=figma.getNodeById(i.nodeId);if(!n){a.push(`Node not found: ${i.nodeId}`),o++;continue}if(n.type!=="COMPONENT"&&n.type!=="COMPONENT_SET"){a.push(`Unexpected node type: ${n.type}`),o++;continue}n.editComponentProperty(i.propKey,{name:i.newName}),t++}catch(n){let s=n instanceof Error?n.message:String(n);a.push(`${i.propKey}: ${s}`),o++,console.error("Rename error:",n)}figma.ui.postMessage({type:"rename-complete",successCount:t,errorCount:o,errors:a}),t>0?figma.notify(`\u2713 Renamed ${t} propert${t===1?"y":"ies"}`+(o>0?` \xB7 ${o} failed`:"")):figma.notify(`Rename failed: ${a[0]||"Unknown error"}`);return}if((e==null?void 0:e.type)==="navigate-to-node"){let{nodeId:r,pageId:t}=e;try{yield figma.loadAllPagesAsync();let o=figma.root.children.find(i=>i.id===t);if(!o){figma.notify("Page not found.",{error:!0});return}figma.currentPage.id!==t&&(figma.currentPage=o);let a=figma.getNodeById(r);a&&"absoluteBoundingBox"in a?(figma.currentPage.selection=[a],figma.viewport.scrollAndZoomIntoView([a])):figma.notify("Component not found on canvas.",{error:!0})}catch(o){console.error("Navigation error:",o),figma.notify("Could not navigate to component.",{error:!0})}return}(e==null?void 0:e.type)==="close"&&figma.closePlugin()})});y();})();
