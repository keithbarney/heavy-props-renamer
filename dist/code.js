"use strict";(()=>{figma.showUI(__html__,{width:480,height:560,title:"Heavy Props Renamer"});figma.ui.onmessage=t=>{if((t==null?void 0:t.type)==="search-props"){let i=(t.query||"").toLowerCase().trim();if(!i){figma.ui.postMessage({type:"error",message:"Enter a search term."});return}let r=[],s=figma.root.findAllWithCriteria({types:["COMPONENT","COMPONENT_SET"]});for(let o of s)try{let n=o.componentPropertyDefinitions;if(!n)continue;for(let e of Object.keys(n)){let p=e.includes("#")?e.split("#")[0]:e;p.toLowerCase().includes(i)&&r.push({nodeId:o.id,propKey:e,displayName:p,componentName:o.name,propType:n[e].type})}}catch(n){console.warn("Skipping node:",o.id,n)}figma.ui.postMessage({type:"search-results",results:r,query:i});return}if((t==null?void 0:t.type)==="rename-props"){let i=t.renames||[];if(i.length===0){figma.ui.postMessage({type:"error",message:"No properties selected to rename."});return}let r=0,s=0,o=[];for(let n of i)try{let e=figma.getNodeById(n.nodeId);if(!e){o.push(`Node not found: ${n.nodeId}`),s++;continue}if(e.type!=="COMPONENT"&&e.type!=="COMPONENT_SET"){o.push(`Unexpected node type: ${e.type}`),s++;continue}e.editComponentProperty(n.propKey,{name:n.newName}),r++}catch(e){let p=e instanceof Error?e.message:String(e);o.push(`${n.propKey}: ${p}`),s++,console.error("Rename error:",e)}figma.ui.postMessage({type:"rename-complete",successCount:r,errorCount:s,errors:o}),r>0?figma.notify(`\u2713 Renamed ${r} propert${r===1?"y":"ies"}`+(s>0?` \xB7 ${s} failed`:"")):figma.notify(`Rename failed: ${o[0]||"Unknown error"}`);return}(t==null?void 0:t.type)==="close"&&figma.closePlugin()};})();
